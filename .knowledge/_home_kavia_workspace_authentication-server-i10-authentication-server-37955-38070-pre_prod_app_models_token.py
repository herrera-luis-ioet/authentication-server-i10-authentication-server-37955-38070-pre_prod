{"is_source_file": true, "format": "Python", "description": "This module defines the Token model for the authentication service, including various methods to manage tokens.", "external_files": ["app.extensions"], "external_methods": [], "published": ["Token", "TokenType"], "classes": [{"name": "TokenType", "description": "Enum for different types of tokens used in the authentication service."}, {"name": "Token", "description": "Model for storing and managing different types of tokens related to user authentication."}], "methods": [{"name": "bool is_expired(self)", "description": "Checks if the token has expired.", "scope": "Token", "scopeKind": "class"}, {"name": "bool is_valid(self)", "description": "Checks if the token is valid (not expired and not revoked).", "scope": "Token", "scopeKind": "class"}, {"name": "None revoke(self)", "description": "Revoke the token, marking it as invalid.", "scope": "Token", "scopeKind": "class"}, {"name": "dict to_dict(self)", "description": "Converts the token object to a dictionary representation.", "scope": "Token", "scopeKind": "class"}, {"name": "\"Token\" generate_token(cls, user_id: int, token_type: TokenType, expires_in: timedelta = None)", "description": "Generates a new token based on user ID and token type.", "scope": "Token", "scopeKind": "class"}, {"name": "Optional[\"Token\"] find_by_token(cls, token_value: str)", "description": "Finds a token by its value.", "scope": "Token", "scopeKind": "class"}, {"name": "Optional[\"Token\"] find_valid_token(cls, token_value: str, token_type: TokenType)", "description": "Finds a valid token (not expired, not revoked) by its value and type.", "scope": "Token", "scopeKind": "class"}, {"name": "int revoke_all_user_tokens(cls, user_id: int, token_type: TokenType = None)", "description": "Revokes all tokens for a specific user, optionally filtered by token type.", "scope": "Token", "scopeKind": "class"}, {"name": "str __repr__(self)", "scope": "Token", "scopeKind": "class", "description": "unavailable"}], "calls": [], "search-terms": ["Token Model", "authentication service", "token management"], "state": 2, "file_id": 11, "knowledge_revision": 25, "git_revision": "", "ctags": [{"_type": "tag", "name": "API_KEY", "path": "/home/kavia/workspace/authentication-server-i10-authentication-server-37955-38070-pre_prod/app/models/token.py", "pattern": "/^    API_KEY = \"api_key\"$/", "language": "Python", "kind": "variable", "scope": "TokenType", "scopeKind": "class"}, {"_type": "tag", "name": "EMAIL_VERIFICATION", "path": "/home/kavia/workspace/authentication-server-i10-authentication-server-37955-38070-pre_prod/app/models/token.py", "pattern": "/^    EMAIL_VERIFICATION = \"email_verification\"$/", "language": "Python", "kind": "variable", "scope": "TokenType", "scopeKind": "class"}, {"_type": "tag", "name": "REFRESH", "path": "/home/kavia/workspace/authentication-server-i10-authentication-server-37955-38070-pre_prod/app/models/token.py", "pattern": "/^    REFRESH = \"refresh\"$/", "language": "Python", "kind": "variable", "scope": "TokenType", "scopeKind": "class"}, {"_type": "tag", "name": "RESET_PASSWORD", "path": "/home/kavia/workspace/authentication-server-i10-authentication-server-37955-38070-pre_prod/app/models/token.py", "pattern": "/^    RESET_PASSWORD = \"reset_password\"$/", "language": "Python", "kind": "variable", "scope": "TokenType", "scopeKind": "class"}, {"_type": "tag", "name": "Token", "path": "/home/kavia/workspace/authentication-server-i10-authentication-server-37955-38070-pre_prod/app/models/token.py", "pattern": "/^class Token(db.Model):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "TokenType", "path": "/home/kavia/workspace/authentication-server-i10-authentication-server-37955-38070-pre_prod/app/models/token.py", "pattern": "/^class TokenType(enum.Enum):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "__repr__", "path": "/home/kavia/workspace/authentication-server-i10-authentication-server-37955-38070-pre_prod/app/models/token.py", "pattern": "/^    def __repr__(self) -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "member", "signature": "(self)", "scope": "Token", "scopeKind": "class"}, {"_type": "tag", "name": "__tablename__", "path": "/home/kavia/workspace/authentication-server-i10-authentication-server-37955-38070-pre_prod/app/models/token.py", "pattern": "/^    __tablename__ = \"tokens\"$/", "file": true, "language": "Python", "kind": "variable", "scope": "Token", "scopeKind": "class"}, {"_type": "tag", "name": "created_at", "path": "/home/kavia/workspace/authentication-server-i10-authentication-server-37955-38070-pre_prod/app/models/token.py", "pattern": "/^    created_at = db.Column(db.DateTime, default=datetime.utcnow)$/", "language": "Python", "kind": "variable", "scope": "Token", "scopeKind": "class"}, {"_type": "tag", "name": "expires_at", "path": "/home/kavia/workspace/authentication-server-i10-authentication-server-37955-38070-pre_prod/app/models/token.py", "pattern": "/^    expires_at = db.Column(db.DateTime, nullable=False)$/", "language": "Python", "kind": "variable", "scope": "Token", "scopeKind": "class"}, {"_type": "tag", "name": "find_by_token", "path": "/home/kavia/workspace/authentication-server-i10-authentication-server-37955-38070-pre_prod/app/models/token.py", "pattern": "/^    def find_by_token(cls, token_value: str) -> Optional[\"Token\"]:$/", "language": "Python", "typeref": "typename:Optional[\"Token\"]", "kind": "member", "signature": "(cls, token_value: str)", "scope": "Token", "scopeKind": "class"}, {"_type": "tag", "name": "find_valid_token", "path": "/home/kavia/workspace/authentication-server-i10-authentication-server-37955-38070-pre_prod/app/models/token.py", "pattern": "/^    def find_valid_token(cls, token_value: str, token_type: TokenType) -> Optional[\"Token\"]:$/", "language": "Python", "typeref": "typename:Optional[\"Token\"]", "kind": "member", "signature": "(cls, token_value: str, token_type: TokenType)", "scope": "Token", "scopeKind": "class"}, {"_type": "tag", "name": "generate_token", "path": "/home/kavia/workspace/authentication-server-i10-authentication-server-37955-38070-pre_prod/app/models/token.py", "pattern": "/^    def generate_token(cls, user_id: int, token_type: TokenType, expires_in: timedelta = None) -/", "language": "Python", "typeref": "typename:\"Token\"", "kind": "member", "signature": "(cls, user_id: int, token_type: TokenType, expires_in: timedelta = None)", "scope": "Token", "scopeKind": "class"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/authentication-server-i10-authentication-server-37955-38070-pre_prod/app/models/token.py", "pattern": "/^    id = db.Column(db.Integer, primary_key=True)$/", "language": "Python", "kind": "variable", "scope": "Token", "scopeKind": "class"}, {"_type": "tag", "name": "is_expired", "path": "/home/kavia/workspace/authentication-server-i10-authentication-server-37955-38070-pre_prod/app/models/token.py", "pattern": "/^    def is_expired(self) -> bool:$/", "language": "Python", "typeref": "typename:bool", "kind": "member", "signature": "(self)", "scope": "Token", "scopeKind": "class"}, {"_type": "tag", "name": "is_revoked", "path": "/home/kavia/workspace/authentication-server-i10-authentication-server-37955-38070-pre_prod/app/models/token.py", "pattern": "/^    is_revoked = db.Column(db.Boolean, default=False)$/", "language": "Python", "kind": "variable", "scope": "Token", "scopeKind": "class"}, {"_type": "tag", "name": "is_valid", "path": "/home/kavia/workspace/authentication-server-i10-authentication-server-37955-38070-pre_prod/app/models/token.py", "pattern": "/^    def is_valid(self) -> bool:$/", "language": "Python", "typeref": "typename:bool", "kind": "member", "signature": "(self)", "scope": "Token", "scopeKind": "class"}, {"_type": "tag", "name": "revoke", "path": "/home/kavia/workspace/authentication-server-i10-authentication-server-37955-38070-pre_prod/app/models/token.py", "pattern": "/^    def revoke(self) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "member", "signature": "(self)", "scope": "Token", "scopeKind": "class"}, {"_type": "tag", "name": "revoke_all_user_tokens", "path": "/home/kavia/workspace/authentication-server-i10-authentication-server-37955-38070-pre_prod/app/models/token.py", "pattern": "/^    def revoke_all_user_tokens(cls, user_id: int, token_type: TokenType = None) -> int:$/", "language": "Python", "typeref": "typename:int", "kind": "member", "signature": "(cls, user_id: int, token_type: TokenType = None)", "scope": "Token", "scopeKind": "class"}, {"_type": "tag", "name": "to_dict", "path": "/home/kavia/workspace/authentication-server-i10-authentication-server-37955-38070-pre_prod/app/models/token.py", "pattern": "/^    def to_dict(self) -> dict:$/", "language": "Python", "typeref": "typename:dict", "kind": "member", "signature": "(self)", "scope": "Token", "scopeKind": "class"}, {"_type": "tag", "name": "token", "path": "/home/kavia/workspace/authentication-server-i10-authentication-server-37955-38070-pre_prod/app/models/token.py", "pattern": "/^    token = db.Column(db.String(255), unique=True, nullable=False, index=True)$/", "language": "Python", "kind": "variable", "scope": "Token", "scopeKind": "class"}, {"_type": "tag", "name": "token_type", "path": "/home/kavia/workspace/authentication-server-i10-authentication-server-37955-38070-pre_prod/app/models/token.py", "pattern": "/^    token_type = db.Column(db.Enum(TokenType), nullable=False)$/", "language": "Python", "kind": "variable", "scope": "Token", "scopeKind": "class"}, {"_type": "tag", "name": "updated_at", "path": "/home/kavia/workspace/authentication-server-i10-authentication-server-37955-38070-pre_prod/app/models/token.py", "pattern": "/^    updated_at = db.Column(db.DateTime, default=datetime.utcnow, onupdate=datetime.utcnow)$/", "language": "Python", "kind": "variable", "scope": "Token", "scopeKind": "class"}, {"_type": "tag", "name": "user", "path": "/home/kavia/workspace/authentication-server-i10-authentication-server-37955-38070-pre_prod/app/models/token.py", "pattern": "/^    user = relationship(\"User\", back_populates=\"tokens\")$/", "language": "Python", "kind": "variable", "scope": "Token", "scopeKind": "class"}, {"_type": "tag", "name": "user_id", "path": "/home/kavia/workspace/authentication-server-i10-authentication-server-37955-38070-pre_prod/app/models/token.py", "pattern": "/^    user_id = db.Column(db.Integer, db.ForeignKey(\"users.id\"), nullable=False)$/", "language": "Python", "kind": "variable", "scope": "Token", "scopeKind": "class"}], "filename": "/home/kavia/workspace/authentication-server-i10-authentication-server-37955-38070-pre_prod/app/models/token.py", "hash": "df6118901063a8288c76317af6759b51", "format-version": 4, "code-base-name": "default", "fields": [{"name": "API_KEY = \"api_key\"", "scope": "TokenType", "scopeKind": "class", "description": "unavailable"}, {"name": "EMAIL_VERIFICATION = \"email_verification\"", "scope": "TokenType", "scopeKind": "class", "description": "unavailable"}, {"name": "REFRESH = \"refresh\"", "scope": "TokenType", "scopeKind": "class", "description": "unavailable"}, {"name": "RESET_PASSWORD = \"reset_password\"", "scope": "TokenType", "scopeKind": "class", "description": "unavailable"}, {"name": "__tablename__ = \"tokens\"", "scope": "Token", "scopeKind": "class", "description": "unavailable"}, {"name": "created_at = db.Column(db.DateTime, default=datetime.utcnow)", "scope": "Token", "scopeKind": "class", "description": "unavailable"}, {"name": "expires_at = db.Column(db.DateTime, nullable=False)", "scope": "Token", "scopeKind": "class", "description": "unavailable"}, {"name": "id = db.Column(db.Integer, primary_key=True)", "scope": "Token", "scopeKind": "class", "description": "unavailable"}, {"name": "is_revoked = db.Column(db.Boolean, default=False)", "scope": "Token", "scopeKind": "class", "description": "unavailable"}, {"name": "token = db.Column(db.String(255), unique=True, nullable=False, index=True)", "scope": "Token", "scopeKind": "class", "description": "unavailable"}, {"name": "token_type = db.Column(db.Enum(TokenType), nullable=False)", "scope": "Token", "scopeKind": "class", "description": "unavailable"}, {"name": "updated_at = db.Column(db.DateTime, default=datetime.utcnow, onupdate=datetime.utcnow)", "scope": "Token", "scopeKind": "class", "description": "unavailable"}, {"name": "user = relationship(\"User\", back_populates=\"tokens\")", "scope": "Token", "scopeKind": "class", "description": "unavailable"}, {"name": "user_id = db.Column(db.Integer, db.ForeignKey(\"users.id\"), nullable=False)", "scope": "Token", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"25": ""}]}