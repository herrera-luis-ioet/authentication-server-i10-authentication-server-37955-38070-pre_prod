{"is_source_file": true, "format": "Python", "description": "This file contains the logging configuration for an authentication management component, including a custom JSON formatter and request-id filtering for structured logging. It integrates with the ELK Stack for log management.", "external_files": [], "external_methods": [], "published": ["setup_logging", "get_logging_config"], "classes": [{"name": "CustomJsonFormatter", "description": "A custom JSON formatter for structured logging that adds additional fields to log records for traceability and analysis."}, {"name": "RequestIdFilter", "description": "A logging filter that adds request ID information to log records if available."}], "methods": [{"name": "get_logging_config(log_level=None)", "description": "Retrieves the logging configuration dictionary, ensuring necessary directories exist and setting formats and handlers based on environment variables.", "scope": "", "scopeKind": ""}, {"name": "setup_logging(app=None, log_level=None)", "description": "Configures logging for the Flask application, including setting up request ID tracking and logging requests and responses.", "scope": "", "scopeKind": ""}, {"name": "setup_logging_metrics(metrics)", "description": "Sets up Prometheus metrics for logging, creating counters based on log levels.", "scope": "", "scopeKind": ""}, {"name": "add_fields(self, log_record, record, message_dict)", "scope": "CustomJsonFormatter", "scopeKind": "class", "description": "unavailable"}, {"name": "after_request(response)", "scope": "setup_logging", "scopeKind": "function", "description": "unavailable"}, {"name": "before_request()", "scope": "setup_logging", "scopeKind": "function", "description": "unavailable"}, {"name": "emit(self, record)", "scope": "setup_logging_metrics.MetricsHandler", "scopeKind": "class", "description": "unavailable"}, {"name": "filter(self, record)", "scope": "RequestIdFilter", "scopeKind": "class", "description": "unavailable"}, {"name": "log_exception(error)", "scope": "setup_logging", "scopeKind": "function", "description": "unavailable"}], "calls": ["logging.config.dictConfig", "os.makedirs", "getattr", "logging.getLogger"], "search-terms": ["logging configuration", "structured logging", "custom formatter", "request id filter"], "state": 2, "file_id": 31, "knowledge_revision": 71, "git_revision": "", "ctags": [{"_type": "tag", "name": "CustomJsonFormatter", "path": "/home/kavia/workspace/authentication-server-i10-authentication-server-37955-38070-pre_prod/app/logging_config.py", "pattern": "/^class CustomJsonFormatter(jsonlogger.JsonFormatter):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "MetricsHandler", "path": "/home/kavia/workspace/authentication-server-i10-authentication-server-37955-38070-pre_prod/app/logging_config.py", "pattern": "/^    class MetricsHandler(logging.Handler):$/", "file": true, "language": "Python", "kind": "class", "scope": "setup_logging_metrics", "scopeKind": "function"}, {"_type": "tag", "name": "RequestIdFilter", "path": "/home/kavia/workspace/authentication-server-i10-authentication-server-37955-38070-pre_prod/app/logging_config.py", "pattern": "/^class RequestIdFilter(logging.Filter):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "add_fields", "path": "/home/kavia/workspace/authentication-server-i10-authentication-server-37955-38070-pre_prod/app/logging_config.py", "pattern": "/^    def add_fields(self, log_record, record, message_dict):$/", "language": "Python", "kind": "member", "signature": "(self, log_record, record, message_dict)", "scope": "CustomJsonFormatter", "scopeKind": "class"}, {"_type": "tag", "name": "after_request", "path": "/home/kavia/workspace/authentication-server-i10-authentication-server-37955-38070-pre_prod/app/logging_config.py", "pattern": "/^        def after_request(response):$/", "file": true, "language": "Python", "kind": "function", "signature": "(response)", "scope": "setup_logging", "scopeKind": "function"}, {"_type": "tag", "name": "before_request", "path": "/home/kavia/workspace/authentication-server-i10-authentication-server-37955-38070-pre_prod/app/logging_config.py", "pattern": "/^        def before_request():$/", "file": true, "language": "Python", "kind": "function", "signature": "()", "scope": "setup_logging", "scopeKind": "function"}, {"_type": "tag", "name": "emit", "path": "/home/kavia/workspace/authentication-server-i10-authentication-server-37955-38070-pre_prod/app/logging_config.py", "pattern": "/^        def emit(self, record):$/", "language": "Python", "kind": "member", "signature": "(self, record)", "scope": "setup_logging_metrics.MetricsHandler", "scopeKind": "class"}, {"_type": "tag", "name": "filter", "path": "/home/kavia/workspace/authentication-server-i10-authentication-server-37955-38070-pre_prod/app/logging_config.py", "pattern": "/^    def filter(self, record):$/", "language": "Python", "kind": "member", "signature": "(self, record)", "scope": "RequestIdFilter", "scopeKind": "class"}, {"_type": "tag", "name": "get_logging_config", "path": "/home/kavia/workspace/authentication-server-i10-authentication-server-37955-38070-pre_prod/app/logging_config.py", "pattern": "/^def get_logging_config(log_level=None):$/", "language": "Python", "kind": "function", "signature": "(log_level=None)"}, {"_type": "tag", "name": "log_exception", "path": "/home/kavia/workspace/authentication-server-i10-authentication-server-37955-38070-pre_prod/app/logging_config.py", "pattern": "/^        def log_exception(error):$/", "file": true, "language": "Python", "kind": "function", "signature": "(error)", "scope": "setup_logging", "scopeKind": "function"}, {"_type": "tag", "name": "setup_logging", "path": "/home/kavia/workspace/authentication-server-i10-authentication-server-37955-38070-pre_prod/app/logging_config.py", "pattern": "/^def setup_logging(app=None, log_level=None):$/", "language": "Python", "kind": "function", "signature": "(app=None, log_level=None)"}, {"_type": "tag", "name": "setup_logging_metrics", "path": "/home/kavia/workspace/authentication-server-i10-authentication-server-37955-38070-pre_prod/app/logging_config.py", "pattern": "/^def setup_logging_metrics(metrics):$/", "language": "Python", "kind": "function", "signature": "(metrics)"}], "filename": "/home/kavia/workspace/authentication-server-i10-authentication-server-37955-38070-pre_prod/app/logging_config.py", "hash": "fa968fb8afe09fc23d39e54843341829", "format-version": 4, "code-base-name": "default", "revision_history": [{"71": ""}]}